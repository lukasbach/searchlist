/*! searchlist 2015-09-19 */
function createElementDom(a,b,c,d){var e=$(c).clone().removeClass("sl-prototype-element").removeClass("sl-prototype-transform-element").attr("data-elementdata",JSON.stringify(b));return(1==d||"undefined"==typeof d)&&e.addClass("sl-element"),e.find("[data-value]").each(function(){listelValue=b,$.each($(this).attr("data-value").split("."),function(a,b){listelValue=listelValue[b]}),$(this).is("[data-putvalue]")&&"html"!=$(this).attr("data-putvalue")?$(this).attr($(this).attr("data-putvalue"),listelValue):$(this).html(listelValue)}),e.find("[data-event-transform]").click(function(){transformElement({transformedElement:e,transformPrototype:$(a).find(".sl-prototype-element[data-elementtype='"+$(this).attr("data-event-transform")+"']")},a)}),e.find("[data-event]").click(function(){"applychanges"==$(this).attr("data-event")?(createElementDom(a,getDataFromElement(e),$(a).find(".sl-prototype-element[data-elementtype='default']")).insertAfter(e),e.remove()):"removeElement"==$(this).attr("data-event")?e.remove():"moveUp"==$(this).attr("data-event")?moveUp({element:e},a):"moveDown"==$(this).attr("data-event")&&moveDown({element:e},a)}),e}function getDataFromElement(a){return obj={},$(a).find("[data-value]").each(function(){var a,b,c,d,e,f=($(this),$(this).attr("data-value"));for(a=f,e=$(this).is("[data-putvalue]")&&"html"!=$(this).attr("data-putvalue")&&"value"!=$(this).attr("data-putvalue")?$(this).attr($(this).attr("data-putvalue")):"value"==$(this).attr("data-putvalue")?$(this).val():$(this).html(),b=a.split("."),d=obj;b.length;)c=b.shift(),b.length?(d.hasOwnProperty(c)||(d[c]=/^\d+$/.test(b[0])?[]:{}),d=d[c]):d[c]=e}),obj}function sortElements(a,b,c,d){var e=[];a.each(function(a){$(this).attr("data-index",a),e.push({index:a,value:$(this).find("[data-value='"+b+"']").html(),element:$(this).addClass("unsorted")})}),e.sort(function(a,b){if("string"==typeof a.value){var d=a.value.toLowerCase(),e=b.value.toLowerCase();return"desc"==c?e>d?-1:d>e?1:0:d>e?-1:e>d?1:0}});var f=$("<div class='sortcontainer'></div>");return $.each(e,function(a,b){elementdata=jQuery.parseJSON($(b.element).attr("data-elementdata")),$(createElementDom(d,elementdata,$(d).find(".sl-prototype-element[data-elementtype='"+$(b.element).attr("data-elementtype")+"']"),!0)).appendTo($(f))}),f.find(".sl-element")}function getValueFromObject(a,b){return listelValue=a,$.each(b.split("."),function(a,b){listelValue=listelValue[b]}),listelValue}function getObjectFromKey(a,b){return obj={},objPointer=obj,$.each(a.split("."),function(c,d){c<a.split(".").length-1?(objPointer[d]={},objPointer=objPointer[d]):objPointer[d]=b}),obj}function getValueFromJson(a,b){return getValueFromObject($.parseJSON(a),b)}function groupList(a,b){var c=[];$(b).find(".sl-element").each(function(){var d=getValueFromJson($(this).attr("data-elementdata"),a.groupkey);if(!(c.indexOf(d)>=0)){c.push(d);var e=$("<div class='sl-group'></div>").attr("data-groupname",d).appendTo($(b));if("headerprototype"in a||"footerprototype"in a)var f={sl:{group:{name:d,count:0}}};"headerprototype"in a&&createElementDom(b,f,$(b).find(".sl-prototype-element[data-elementtype='"+a.headerprototype+"']"),!1).addClass("sl-groupheader").appendTo(e),"footerprototype"in a&&createElementDom(b,f,$(b).find(".sl-prototype-element[data-elementtype='"+a.footerprototype+"']"),!1).addClass("sl-groupfooter").appendTo(e)}var e=$(b).find(".sl-group[data-groupname='"+d+"']");"footerprototype"in a?$(this).insertBefore(e.find(".sl-groupfooter")):$(this).appendTo(e)}),$(b).addClass("grouped")}function unGroup(a,b){$(b).find(".sl-group .sl-element").appendTo(b),$(b).find(".sl-group, sl-groupheader, sl-groupfooter").remove(),$(b).removeClass("grouped")}function sortGroup(a,b){if("undefined"!=typeof a.groupname)var c=$(b).find(".sl-group[data-groupname='"+a.groupname+"']");else if("undefined"!=typeof a.group)var c=$(a.group);else console.log("error");var d=sortElements(c.find(".sl-element:not(.sl-prototype-element)"),a.sortkey,a.direction,b);c.find(".sl-element.unsorted").remove(),c.append(d)}function injectElement(a,b){createElementDom(b,a.value,$(b).find(".sl-prototype-element[data-elementtype='default']")).appendTo(b)}function removeElement(a,b){"key"in a?$(b).find(".sl-element:not(.sl-prototype-element):nth-child("+String(a.key+1)+")").remove():"element"in a&&$(a.element).remove()}function modifyElement(a,b){if("key"in a)var c=$(b).find(".sl-element:not(.sl-prototype-element):nth-child("+String(a.key+1)+")");else if("element"in a)var c=$(a.element);var d=$.extend(!0,jQuery.parseJSON(c.attr("data-elementdata")),a.data);createElementDom(b,d,$(b).find(".sl-prototype-element[data-elementtype='"+c.attr("data-elementtype")+"']")).insertAfter(c),c.remove()}function moveUp(a,b){"key"in a?element=$(b).find(".sl-element:not(.sl-prototype-element):nth-child("+String(a.key+1)+")"):"element"in a&&(element=$(a.element)),element.insertBefore(element.prev(".sl-element:not(.sl-prototype-element)"))}function moveDown(a,b){"key"in a?element=$(b).find(".sl-element:not(.sl-prototype-element):nth-child("+String(a.key+1)+")"):"element"in a&&(element=$(a.element)),element.insertAfter(element.next(".sl-element:not(.sl-prototype-element)"))}function addElement(a,b){$(b).append(createElementDom(b,a.data,a.prototypeelement))}function search(a,b){var c={keywords:"",hideUnrelevants:"true",caseSensitive:"false",animate:"wrong"},a=$.extend({},c,a);"true"==a.animate&&$(b).css("position","relative"),$el=$(b).find(".sl-element").each(function(){var b=0;if($(this).find("[data-value]").each(function(){var c=$(this);$.each(a.keywords.split(" "),function(d,e){thisMatches=c.html().match("true"==a.caseSensitive?e:new RegExp(e,"i")),b+=null==thisMatches?0:thisMatches.length})}),$(this).hasClass("searchFound")?$(this).removeClass("searchPreviouslyNotFound"):$(this).hasClass("searchNotFound")&&$(this).addClass("searchPreviouslyNotFound"),0!=b?$(this).addClass("searchFound").removeClass("searchNotFound"):$(this).addClass("searchNotFound").removeClass("searchFound"),"true"==a.animate&&"true"==a.hideUnrelevants){if($(this).hasClass("searchFound")&&$(this).hasClass("searchPreviouslyNotFound")){var c=$(this).css("height","auto").outerHeight();$(this).height(0).animate({height:c,opacity:1},500,function(){$(this).removeAttr("style")})}$(this).hasClass("searchNotFound")&&!$(this).hasClass("searchPreviouslyNotFound")&&$(this).animate({height:0,opacity:0,"padding-top":0,"padding-bottom":0},500,function(){$(this).removeAttr("style"),$(this).css("display","none")})}}),$(b).find(".sl-element.searchFound").css("display","block"),"true"!=a.animate&&("true"==a.hideUnrelevants?$(b).find(".sl-element.searchNotFound").css("display","none"):$(b).find(".sl-element.searchNotFound").css("display","block"))}function sortList(a,b){if($(b).hasClass("grouped"))$(b).find(".sl-group").each(function(){sortGroup({group:this,sortkey:a.sortkey,direction:a.direction},b)});else{var c=sortElements($(b).find(".sl-element:not(.sl-prototype-element)"),a.sortkey,a.direction,b);$(b).find(".sl-element.unsorted").remove(),$(b).append(c)}}function transformElement(a,b){previousElement=$(a.transformedElement).prev(),elementdata=jQuery.parseJSON($(a.transformedElement).attr("data-elementdata")),$(a.transformedElement).remove(),createElementDom(b,elementdata,a.transformPrototype).insertAfter(previousElement)}function initialize(a,b){"string"==typeof a.source?$.getJSON(a.source,function(c){$.each(a.context.split("."),function(a,b){c=c[b]}),$.each(c,function(a,c){createElementDom(b,c,$(b).find(".sl-prototype-element[data-elementtype='default']")).appendTo(b)})}):"object"==typeof a.source&&(data=a.source,$.each(a.context.split("."),function(a,b){data=data[b]}),$.each(data,function(a,c){createElementDom(b,c,$(b).find(".sl-prototype-element[data-elementtype='default']")).appendTo(b)}))}$(document).ready(function(){$("<style type='text/css'>.sl-prototype-element, .sl-prototype-transform-element {display: none}</style>").appendTo("head"),$(".searchlist").each(function(){var a={};$(this).is("[data-source")&&(a.source=$(this).attr("data-source")),$(this).is("[data-context")&&(a.context=$(this).attr("data-context")),$(this).searchlist("initialize",a)}),interfacesInit({})}),$.fn.searchlist=function(a,b){return this.each(function(){return window[a](b,this)})};